<div class="new-arrivals page-width" id="NewArrivals-{{ section.id }}">
  <div class="section-header">
    <h2 class="category-title">NEW ARRIVALS</h2>
    <div class="title-underline"></div>
  </div>

  <div class="arrivals-grid">
    {%- assign collection = collections[section.settings.collection] -%}
    {%- for product in collection.products limit: 3 -%}
      <div class="arrival-card">
        <a href="{{ product.url }}" class="product-link">
          <div class="image-wrapper">
            {% if product.featured_media != blank %}
              {{ product.featured_media | image_url: width: 800 | image_tag: class: 'arrival-img' }}
            {% else %}
              {{ 'product-1' | placeholder_svg_tag: 'arrival-img' }}
            {% endif %}
          </div>
          <div class="card-info">
            <div class="text-content">
              <h3>{{ product.title }}</h3>
              <p class="product-price">{{ product.price | money }}</p>
            </div>
          </div>
        </a>

        {% comment %} Requirement: Functional Add to Cart button {% endcomment %}
        <form method="post" action="/cart/add">
          <input type="hidden" name="id" value="{{ product.variants.first.id }}">
          <button type="submit" class="add-to-cart-btn">ADD TO CART</button>
        </form>
      </div>
    {%- else -%}
      {% comment %} কাস্টমাইজারে কিছু সিলেক্ট না করা থাকলে ৩টি ডামি প্রোডাক্ট দেখাবে {% endcomment %}
      {% for i in (1..3) %}
        <div class="arrival-card">
          <div class="image-wrapper">{{ 'product-' | append: i | placeholder_svg_tag: 'arrival-img' }}</div>
          <div class="card-info">
            <div class="text-content">
              <h3>Sample Product {{ i }}</h3>
              <p class="product-price">$19.99</p>
            </div>
          </div>
          <button class="add-to-cart-btn">ADD TO CART</button>
        </div>
      {% endfor %}
    {%- endfor -%}
  </div>
</div>

<style>
  #NewArrivals-{{ section.id }} { padding: 60px 20px; background: #fff margin:20px; }
  .section-header { position: relative; margin-bottom: 50px; display: inline-block; }.section-header { margin-bottom: 40px; position: relative; }
  .category-title { font-size: 32px; font-weight: 900; margin: 0; text-transform: uppercase; display: inline-block; }
  .title-underline { width: 100px; height: 8px; background: #EBD96B; border-radius: 10px; margin-top: -10px; }

  .arrivals-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px; }
  .arrival-card { display: flex; flex-direction: column; }
  .product-link { text-decoration: none; color: inherit; }
  .image-wrapper { border-radius: 20px; overflow: hidden; margin-bottom: 15px; aspect-ratio: 4/5; background: #f3f3f3; }
  .arrival-img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.3s ease; }
  .arrival-card:hover .arrival-img { transform: scale(1.05); }
  .card-info { margin-bottom: 15px; }
  .text-content h3 { font-size: 20px; font-weight: 700; margin: 0; color: #000; }
  .product-price { font-size: 16px; color: #666; margin: 5px 0 0; font-weight: 600; }
  .add-to-cart-btn { background: #000; color: #fff; border: none; padding: 15px; font-weight: bold; border-radius: 12px; cursor: pointer; width: 100%; transition: background 0.3s; }
  .add-to-cart-btn:hover { background: #333; }
  @media screen and (max-width: 749px) { .arrivals-grid { grid-template-columns: 1fr; } }
</style>

{% schema %}
{
  "name": "Featured Products Section",
  "settings": [
    { "type": "text", "id": "heading", "label": "Section Heading", "default": "NEW ARRIVALS" },
    { "type": "collection", "id": "collection", "label": "Select Collection" }
  ],
  "presets": [{ "name": "Featured Products Section" }]
}
{% endschema %}
